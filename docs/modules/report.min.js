!function(t,e){"use strict";var n=e.module("reports",["ng","ngSanitize","ngMessages"]);t.console?null:t.console={log:function(){}},n.constant("colTypes",{ID:1,IDS:2,TITLE:3,DATE:4,CUSTOMER:5,RESOURCE:6,STATUS:7,STATUSSM:8,FAMILY:9,NUMBER:10,HOURS:11,COSTS:12,PERCENT:13,INCREMENT:14,ICON:15,BUTTONS:16,DISABLED:17,LINK:18,BOOL:19,DOUBLE:20,WEEKS:21});n.directive("state",["$timeout",function(t){return{restrict:"EA",template:'<button type="button" class="btn btn-sm btn-primary btn-block-md-down" ng-class="stateClass()" ng-disabled="stateDisabled()"><span ng-transclude></span></button>',transclude:!0,replace:!0,scope:{state:"="},link:function(e,n,i,r){function s(){t(function(){return e.$parent.$eval(i.onValidate)?void e.$parent.$eval("form.$setSubmitted()"):(console.log("state.onClick",i.onValidate,i.onClick),e.state.button=n,e.$parent.$eval(i.onClick))})}function o(){n.on("touchstart click",s)}function a(){n.off("touchstart click",s)}e.stateClass=function(){if(e.state.button===n){var t={busy:e.state.isBusy,successing:e.state.isSuccessing,success:e.state.isSuccess,errorring:e.state.isErroring,error:e.state.isError};return t}return null},e.stateDisabled=function(){var t=e.state.button&&e.state.button!==n;return t},e.$on("$destroy",function(){a()}),o()}}}]),n.directive("sortable",["$timeout",function(t){return{restrict:"A",scope:{source:"=sortable",key:"@sortableKey",sort:"=?"},template:"<th ng-class=\"{ 'sorted-up': sort == 1, 'sorted-down': sort == -1 }\" ng-transclude></th>",transclude:!0,replace:!0,link:function(t,e,n,i){function r(){t.sort=t.source.getSort(t.key)}function s(){if(t.source.state.enabled()){var e=t.sort?t.sort*-1:1;t.source.setSort(t.key,e).then(function(n){t.sort=e})}}function o(){e.on("touchstart click",s)}function a(){e.off("touchstart click",s)}t.sort=t.sort||0,t.$watchCollection("source.filters.sort",r),r(),t.$on("$destroy",function(){a()}),o()}}}]),n.directive("draggableItem",["$parse","$timeout","Utils","Style","ElementRect","Droppables",function(n,i,r,s,o,a){return{require:"ngModel",link:function(u,c,h,f){function l(t){return M(u)&&(E=r.getTouch(t),p()),!1}function g(t){return b=r.getTouch(t),w=E.difference(b),!x&&w.power()>25&&(x=!0,c.addClass("dragging")),x&&(R.transform="translateX("+w.x+"px) translateY("+w.y+"px)",R.set(k),N.set(T).offset(w),C=a.getIntersections(N),C.length&&e.element(C[0].native).addClass("dropping")),!1}function d(t){if(x){x=!1,c.removeClass("dragging"),R.transform="none",R.set(k);var r=n(h.droppableIndex)(u),s=n(h.ngModel)(u);if(C.length){var o=null;e.forEach(C,function(t,n){e.element(t.native).removeClass("dropping over"),t.data.droppable(u)&&!o&&(o={from:{index:r,model:s,target:k},to:{index:t.data.index,model:t.data.model,target:t.native}},i(function(){u.$emit("onDropItem",o)}))})}else{var o={from:{index:r,model:s,target:k},to:null};i(function(){u.$emit("onDropOut",o)})}}return m(),!1}function p(){e.element(t).on("touchmove mousemove",g),e.element(t).on("touchend mouseup",d)}function m(){e.element(t).off("touchmove mousemove",g),e.element(t).off("touchend mouseup",d)}function v(){c.on("touchstart mousedown",l)}function y(){c.off("touchstart mousedown",l)}var E,b,w,x,C,T=c[0],S=h.draggableItem||".item",M=void 0!==h.draggableIf?n(h.draggableIf):function(){return!0},k=T.querySelector(S),R=new s,N=new o;u.$on("$destroy",function(){y()}),v()}}}]),n.directive("droppableItem",["$parse","Utils","Style","Droppables",function(t,e,n,i){return{require:"ngModel",link:function(e,n,r,s){function o(){var n=t(r.droppableIndex)(e),i=t(r.ngModel)(e),s=void 0!==r.droppableIf?t(r.droppableIf):function(){return!0};return{index:n,model:i,droppable:s}}var a=n[0];r.droppableItem||".item";i.add(a,o),e.$on("$destroy",function(){i.remove(a)})}}}]),n.directive("onClickOut",["$document","$parse","$timeout","Utils",function(t,n,i,r){return{restrict:"A",link:function(s,o,a,u){function c(t){null===r.getClosestElement(t.target,o[0])&&i(function(){console.log("onClickOut",a.onClickOut,s.cols.showValues);var t=n(a.onClickOut);t(s)})}function h(){e.element(t).on("click",c)}function f(){e.element(t).off("click",c)}s.$on("$destroy",function(){f()}),h()}}}]),n.directive("toggler",["$document","$parse","$timeout","Utils",function(t,n,i,r){return{restrict:"A",link:function(s,o,a,u){function c(){return n(a.toggler+"=="+a.value)(s)}function h(){d(),i(function(){n(a.toggler+"="+a.value)(s)})}function f(){p(),i(function(){n(a.toggler+"=null")(s)})}function l(t){setTimeout(function(){c()?f():h()},100)}function g(t){c()&&null===r.getClosestElement(t.target,o[0])&&null===r.getClosest(t.target,a.target)&&f()}function d(){e.element(t).on("click",g)}function p(){e.element(t).off("click",g)}function m(){o.on("click",l)}function v(){o.off("click",l)}if(void 0===a.value)throw new Error("[toggler] attribute value required");if(void 0===a.target)throw new Error("[toggler] attribute target required");s.$on("$destroy",function(){v(),p()}),m()}}}]),n.filter("shortName",["$filter",function(t){function e(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}return function(t){if(!t)return"";t.indexOf(" .")===t.length-2&&(t=t.split(" .").join(""));var n=t.split(" "),i=n.shift();if(n.length){var r=n.join(" ");return i.substr(0,1).toUpperCase()+"."+e(r)}return i}}]),n.filter("customCurrency",["$filter",function(t){var e=t("currency");return function(t,n){return e(t*n.ratio,n.formatting)}}]),n.filter("customNumber",["$filter",function(t){var e=t("number");return function(t,n,i){return i=i||"",t?e(t,n)+i:"-"}}]),n.filter("customHours",[function(){return function(t){if(t){var e=Math.floor(t),n=Math.floor(60*(t-e)),i=e?e+" H":"";return i+=n?" "+n+" m":""}return"-"}}]),n.filter("customDate",["$filter",function(t){var e=t("date");return function(t,n,i){return t?e(t,n,i):"-"}}]),n.filter("customTime",["$filter",function(t){return function(t,e){return t?Utils.parseTime(t):e?e:"-"}}]),n.filter("customDigital",["$filter",function(t){return function(t,e){return t?Utils.parseHour(t):e?e:"-"}}]),n.filter("customString",["$filter",function(t){return function(t,e){return t?t:e?e:"-"}}]),n.filter("customEnum",function(){return function(t){return t+=1,t<10?"0"+t:t}}),n.filter("groupBy",["$parse","filterWatcher",function(t,n){function i(t,n){var i,r={};return e.forEach(t,function(t){i=n(t),r[i]||(r[i]=[]),r[i].push(t)}),r}return function(r,s){return!e.isObject(r)||e.isUndefined(s)?r:n.isMemoized("groupBy",arguments)||n.memoize("groupBy",arguments,this,i(r,t(s)))}}]),n.provider("filterWatcher",function(){function t(t){return null===t}function n(t){return t&&t.$evalAsync&&t.$watch}this.$get=["$window","$rootScope",function(i,r){function s(r,s){function o(){var r=[];return function(s,o){if(e.isObject(o)&&!t(o)){if(~r.indexOf(o))return"[Circular]";r.push(o)}return i==o?"$WINDOW":i.document==o?"$DOCUMENT":n(o)?"$SCOPE":o}}return[r,JSON.stringify(s,o())].join("#").replace(/"/g,"")}function o(t){var n=t.targetScope.$id;e.forEach(l[n],function(t){delete f[t]}),delete l[n]}function a(){g(function(){r.$$phase||(f={})},2e3)}function u(t,n){var i=t.$id;return e.isUndefined(l[i])&&(t.$on("$destroy",o),l[i]=[]),l[i].push(n)}function c(t,e){var n=s(t,e);return f[n]}function h(t,e,i,r){var o=s(t,e);return f[o]=r,n(i)?u(i,o):a(),r}var f={},l={},g=i.setTimeout;return{isMemoized:c,memoize:h}}]}),n.factory("Animate",[function(){function e(t,e){this.callback=t,this.isPlaying=!1,this.key=null,this.ticks=0,this.useTimeout=e===!0}return e.prototype={play:function(){function e(i){n.ticks++,n.callback(i,n.ticks),this.useTimeout?n.key=t.setTimeout(e,1e3/60):n.key=t.requestAnimationFrame(e)}var n=this;this.key||(this.isPlaying=!0,e())},pause:function(){this.key&&(this.useTimeout?t.clearTimeout(this.key):t.cancelAnimationFrame(this.key),this.key=null,this.isPlaying=!1)},playpause:function(){this.key?this.pause():this.play()}},e}]),n.factory("Md5",[function(){function t(t,e){var o=t[0],a=t[1],u=t[2],c=t[3];o=n(o,a,u,c,e[0],7,-680876936),c=n(c,o,a,u,e[1],12,-389564586),u=n(u,c,o,a,e[2],17,606105819),a=n(a,u,c,o,e[3],22,-1044525330),o=n(o,a,u,c,e[4],7,-176418897),c=n(c,o,a,u,e[5],12,1200080426),u=n(u,c,o,a,e[6],17,-1473231341),a=n(a,u,c,o,e[7],22,-45705983),o=n(o,a,u,c,e[8],7,1770035416),c=n(c,o,a,u,e[9],12,-1958414417),u=n(u,c,o,a,e[10],17,-42063),a=n(a,u,c,o,e[11],22,-1990404162),o=n(o,a,u,c,e[12],7,1804603682),c=n(c,o,a,u,e[13],12,-40341101),u=n(u,c,o,a,e[14],17,-1502002290),a=n(a,u,c,o,e[15],22,1236535329),o=i(o,a,u,c,e[1],5,-165796510),c=i(c,o,a,u,e[6],9,-1069501632),u=i(u,c,o,a,e[11],14,643717713),a=i(a,u,c,o,e[0],20,-373897302),o=i(o,a,u,c,e[5],5,-701558691),c=i(c,o,a,u,e[10],9,38016083),u=i(u,c,o,a,e[15],14,-660478335),a=i(a,u,c,o,e[4],20,-405537848),o=i(o,a,u,c,e[9],5,568446438),c=i(c,o,a,u,e[14],9,-1019803690),u=i(u,c,o,a,e[3],14,-187363961),a=i(a,u,c,o,e[8],20,1163531501),o=i(o,a,u,c,e[13],5,-1444681467),c=i(c,o,a,u,e[2],9,-51403784),u=i(u,c,o,a,e[7],14,1735328473),a=i(a,u,c,o,e[12],20,-1926607734),o=r(o,a,u,c,e[5],4,-378558),c=r(c,o,a,u,e[8],11,-2022574463),u=r(u,c,o,a,e[11],16,1839030562),a=r(a,u,c,o,e[14],23,-35309556),o=r(o,a,u,c,e[1],4,-1530992060),c=r(c,o,a,u,e[4],11,1272893353),u=r(u,c,o,a,e[7],16,-155497632),a=r(a,u,c,o,e[10],23,-1094730640),o=r(o,a,u,c,e[13],4,681279174),c=r(c,o,a,u,e[0],11,-358537222),u=r(u,c,o,a,e[3],16,-722521979),a=r(a,u,c,o,e[6],23,76029189),o=r(o,a,u,c,e[9],4,-640364487),c=r(c,o,a,u,e[12],11,-421815835),u=r(u,c,o,a,e[15],16,530742520),a=r(a,u,c,o,e[2],23,-995338651),o=s(o,a,u,c,e[0],6,-198630844),c=s(c,o,a,u,e[7],10,1126891415),u=s(u,c,o,a,e[14],15,-1416354905),a=s(a,u,c,o,e[5],21,-57434055),o=s(o,a,u,c,e[12],6,1700485571),c=s(c,o,a,u,e[3],10,-1894986606),u=s(u,c,o,a,e[10],15,-1051523),a=s(a,u,c,o,e[1],21,-2054922799),o=s(o,a,u,c,e[8],6,1873313359),c=s(c,o,a,u,e[15],10,-30611744),u=s(u,c,o,a,e[6],15,-1560198380),a=s(a,u,c,o,e[13],21,1309151649),o=s(o,a,u,c,e[4],6,-145523070),c=s(c,o,a,u,e[11],10,-1120210379),u=s(u,c,o,a,e[2],15,718787259),a=s(a,u,c,o,e[9],21,-343485551),t[0]=h(o,t[0]),t[1]=h(a,t[1]),t[2]=h(u,t[2]),t[3]=h(c,t[3])}function e(t,e,n,i,r,s){return e=h(h(e,t),h(i,s)),h(e<<r|e>>>32-r,n)}function n(t,n,i,r,s,o,a){return e(n&i|~n&r,t,n,s,o,a)}function i(t,n,i,r,s,o,a){return e(n&r|i&~r,t,n,s,o,a)}function r(t,n,i,r,s,o,a){return e(n^i^r,t,n,s,o,a)}function s(t,n,i,r,s,o,a){return e(i^(n|~r),t,n,s,o,a)}function o(e){var n,i=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)t(r,a(e.substring(n-64,n)));e=e.substring(n-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)s[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(s[n>>2]|=128<<(n%4<<3),n>55)for(t(r,s),n=0;n<16;n++)s[n]=0;return s[14]=8*i,t(r,s),r}function a(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function u(t){for(var e="",n=0;n<4;n++)e+=l[t>>8*n+4&15]+l[t>>8*n&15];return e}function c(t){for(var e=0;e<t.length;e++)t[e]=u(t[e]);return t.join("")}function h(t,e){return t+e&4294967295}function f(){}var l="0123456789abcdef".split("");return f.encode=function(t){return c(o(t))},"5d41402abc4b2a76b9719d911017c592"!==f.encode("hello")&&(h=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}),f}]),n.factory("Utils",["$compile","$controller","Vector","Md5",function(n,i,r,s){function o(t,e){var n=new r;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var i=null,s=t.originalEvent?t.originalEvent:t,o=s.touches.length?s.touches:s.changedTouches;o&&o.length&&(i=o[0]),i&&(n.x=i.pageX,n.y=i.pageY)}else"click"!=t.type&&"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(n.x=t.pageX,n.y=t.pageY);return e&&(n.s=r.difference(e,n)),n.type=t.type,n}function a(t,e){var n=t[0].getBoundingClientRect(),i=new r(n.left,n.top);return r.difference(i,e)}function u(t,e){var n,i;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(i=t.parentElement,null!==i&&i[n](e))return i;t=i}return null}function c(t,e){var n;if(t===e)return t;for(;null!==t;){if(n=t.parentElement,null!==n&&n===e)return n;t=n}return null}function h(t,e,n){var i,r,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:E(),o=null,s=t.apply(i,r),o||(i=r=null)};return function(){var c=E();a||n.leading!==!1||(a=c);var h=e-(c-a);return i=this,r=arguments,h<=0||h>e?(o&&(clearTimeout(o),o=null),a=c,s=t.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(u,h)),s}}function f(t,n){var i=null;return t&&e.forEach(t,function(t){var r=!0;e.forEach(n,function(e,n){r=r&&t[n]===e}),r&&(i=t)}),i}function l(t,r,s,o){r.html(s);var a=n(r.contents());if(o.controller){var u=t.$new();e.extend(u,o);var c=i(o.controller,{$scope:u});o.controllerAs&&(t[o.controllerAs]=c),r.data("$ngControllerController",c),r.children().data("$ngControllerController",c),t=u}a(t)}function g(){}function d(t){return function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}}function p(t,n,i){t=t||"",n=n||"";var r=t.split(",");if(r.length>1){var s=r.shift();return e.forEach(r,function(t,e){s=i?s.split("{"+e+"}").join("' + "+n+t+" + '"):s.split("{"+e+"}").join(n+t)}),i?"'"+s+"'":s}return n+t}function m(t,e){return t[e]}function v(t,e,n){return"string"==typeof e?v(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]=n:0==e.length?t:v(t[e[0]],e.slice(1),n)}function y(t,e,n){return"string"==typeof e?y(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]+=n:0==e.length?t:y(t[e[0]],e.slice(1),n)}!function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,i){var r=(new Date).getTime(),s=Math.max(0,16-(r-e)),o=t.setTimeout(function(){n(r+s)},s);return e=r+s,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),i=n.length>>>0,r=0;if(2==arguments.length)e=arguments[1];else{for(;r<i&&!(r in n);)r++;if(r>=i)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;r<i;)r in n&&(e=t(e,n[r],r,n)),r++;return e}})}();var E=Date.now||function(){return(new Date).getTime()},b=t.navigator.userAgent.toLowerCase(),w=b.indexOf("safari")!==-1&&b.indexOf("chrome")===-1,x=b.indexOf("trident")!==-1||b.indexOf("edge")!==-1||b.indexOf("msie")!==-1,C=!w&&!x&&b.indexOf("chrome")!==-1,T=b.indexOf("mobile")!==-1;return g.reverseSortOn=d,g.getTouch=o,g.getRelativeTouch=a,g.getClosest=u,g.getClosestElement=c,g.throttle=h,g.where=f,g.format=p,g.compileController=l,g.reducer=m,g.reducerSetter=v,g.reducerAdder=y,g.toMd5=function(t){return s.encode(t)},g.ua={safari:w,msie:x,chrome:C,mobile:T},e.forEach(g.ua,function(t,n){t&&e.element(document.getElementsByTagName("body")).addClass(n)}),g}]),n.factory("State",["$timeout",function(t){function e(){this.isReady=!1,this.idle()}return e.prototype={idle:function(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.button=null,this.errors=[]},enabled:function(){return!this.isBusy&&!this.isErroring&&!this.isSuccessing},busy:function(){return!this.isBusy&&(this.isBusy=!0,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.errors=[],!0)},success:function(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!0,this.isSuccessing=!0,this.errors=[],t(function(){this.isSuccessing=!1,this.button=null}.bind(this),1e3)},error:function(e){this.isBusy=!1,this.isError=!0,this.isErroring=!0,this.isSuccess=!1,this.isSuccessing=!1,this.errors.push(e),t(function(){this.isErroring=!1,this.button=null}.bind(this),1e3)},ready:function(){this.isReady=!0,this.success()},errorMessage:function(){return this.isError?this.errors[this.errors.length-1]:null},submitClass:function(){return{busy:this.isBusy,ready:this.isReady,successing:this.isSuccessing,success:this.isSuccess,errorring:this.isErroring,error:this.isError}},submitMessage:function(t,e,n,i){return t=t||"Submit",this.isBusy?e||t:this.isSuccess?n||t:this.isError?i||t:t}},e}]),n.factory("Range",["$filter",function(t){function n(t){this.type=n.types.QUARTER,t?e.extend(this,t):null}return n.prototype={currentQuarter:function(){return this.diff=0,this.setQuarter()},currentSemester:function(){return this.diff=0,this.setSemester()},currentYear:function(){return this.diff=0,this.setYear()},setQuarter:function(){this.type=n.types.QUARTER;var t=new Date;t.setMonth(t.getMonth()+3*this.diff);var e=t.getFullYear(),i=Math.floor(t.getMonth()/3);return this.from=new Date(e,3*i,1),this.to=new Date(e,3*i+3,0),this},setSemester:function(){this.type=n.types.SEMESTER;var t=new Date;t.setMonth(t.getMonth()+6*this.diff);var e=t.getFullYear(),i=Math.floor(t.getMonth()/6);return this.from=new Date(e,6*i,1),this.to=new Date(e,6*i+6,0),this},setYear:function(){this.type=n.types.YEAR;var t=new Date;t.setMonth(t.getMonth()+12*this.diff);var e=t.getFullYear();return this.from=new Date(e,0,1),this.to=new Date(e,12,0),this},getName:function(){switch(this.type){case n.types.QUARTER:return"Trimestre "+t("date")(this.from,"MMM")+"-"+t("date")(this.to,"MMM")+" "+t("date")(this.from,"yyyy");case n.types.SEMESTER:return"Semestre "+t("date")(this.from,"MMM")+"-"+t("date")(this.to,"MMM")+" "+t("date")(this.from,"yyyy");case n.types.YEAR:return"Anno "+t("date")(this.from,"yyyy")}},setDiff:function(t){switch(this.diff+=t,this.type){case n.types.QUARTER:return this.setQuarter();case n.types.SEMESTER:return this.setSemester();case n.types.YEAR:return this.setYear()}},set:function(t,e){return t.dateFrom=this.from,t.dateTo=this.to,e?e.setDates(t.dateFrom,t.dateTo):null,this},is:function(t){return t.dateFrom.getTime()==this.from.getTime()&&t.dateTo.getTime()==this.to.getTime()}},n.types={QUARTER:1,SEMESTER:2,YEAR:3},n}]),n.factory("Vector",function(){function t(t,e){this.x=t||0,this.y=e||0}return t.make=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.size=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.normalize=function(e){var n=t.size(e);return e.x/=n,e.y/=n,e},t.incidence=function(t,e){var n=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.difference=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.power=function(t,e){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return(n+i)/2},t.prototype={size:function(){return t.size(this)},normalize:function(){return t.normalize(this)},incidence:function(e){return t.incidence(this,e)},cross:function(e){return t.cross(this,e)},distance:function(e){return t.distance(this,e)},difference:function(e){return t.difference(this,e)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},towards:function(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},friction:function(t){return this.x*=t,this.y*=t,this},copy:function(e){return new t(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},t}),n.factory("ElementRect",["Vector",function(t){function e(){this.x=0,this.y=0,this.width=0,this.height=0,this.center=new t}return e.fromNative=function(t){return(new e).set(t)},e.prototype={set:function(t){var e=t.getBoundingClientRect();return this.x=e.left,this.y=e.top,this.width=t.offsetWidth,this.height=t.offsetHeight,this.center.x=this.x+this.width/2,this.center.y=this.y+this.height/2,this.native=t,this},offset:function(t){return this.x+=t.x,this.y+=t.y,this.center.x=this.x+this.width/2,this.center.y=this.y+this.height/2,this},intersect:function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},toString:function(){return"{"+this.x+","+this.y+","+this.width+","+this.height+"}"}},e}]),n.factory("Style",function(){function t(){this.props={scale:1,hoverScale:1,currentScale:1}}var n=function(){var t="transform",e="webkitTransform",i=document.createElement("DIV");return"undefined"!=typeof i.style[t]?["webkit","moz","o","ms"].every(function(t){var e="-"+t+"-transform";return"undefined"==typeof i.style[e]||(n=e,!1)}):n="undefined"!=typeof i.style[e]?"-webkit-transform":void 0,n}();return t.prototype={set:function(t){var n=[];e.forEach(this,function(t,e){"props"!==e&&n.push(e+":"+t)}),t.style.cssText=n.join(";")+";"},transform:function(t){this[n]=t},transformOrigin:function(t,e){this[n+"-origin-x"]=Math.round(1e3*t)/1e3+"%",this[n+"-origin-y"]=Math.round(1e3*e)/1e3+"%"}},t.prefix=n,t}),n.factory("DataFilter",["$filter",function(n){function i(t){t?e.extend(this,t):null}return i.prototype={getObjectParams:function(t){var e=[];if(t)for(var n in t)e.push({name:n,value:t[n]});return e},getParams:function(e){var n,i={};for(var r in this)switch(r){case"dateFrom":case"dateTo":case"status":n=this[r],void 0!==n&&(i[r]=n);break;case"search":case"sort":var s=JSON.stringify(this.getObjectParams(this[r]),null,"");i[r]=t.btoa(s)}return e.unpaged||(i.page=e.page,i.size=e.size),i},getMonths:function(){function t(t,e){var n;return n=12*(e.getFullYear()-t.getFullYear()),n-=t.getMonth()+1,n+=e.getMonth()+1,n++,n<=0?0:n}var e=[];if(this.dateFrom&&this.dateTo){var i=[this.dateFrom,this.dateTo];i=i.sort(function(t,e){return t.getTime()-e.getTime()});for(var r=Math.max(1,t(i[0],i[1])),s=0;s<r;){var o=new Date(i[0].getFullYear(),i[0].getMonth()+s,1);e.push({id:o.getTime(),name:n("date")(o,"(yyyy MM) MMMM"),nameShort:n("date")(o,"MMM yy")}),s++}}return e}},i}]),n.factory("DataSource",["$q","$http","$rootScope","$location","State","DataFilter",function(t,n,i,r,s,o){function a(t){this.state=new s,this.page=u,this.size=c,this.pages=h,this.count=0,this.maxPages=10,this.items=[],this.rows=[],this.allrows=[],this.steps=[],this.filters=new o({}),this.uri="/api/items/paging",this.unpaged=!1,t?e.extend(this,t):null}var u=1,c=7,h=Number.POSITIVE_INFINITY;return a.prototype={resolve:function(t){e.forEach(this.response.data,function(t){this.push(t)},this.rows),t.resolve()},group:function(t){t.resolve()},next:function(e){if(this.steps.length){var n=t.defer();n.promise.then(function(t){this.next(e)}.bind(this),function(t){this.error(t)}.bind(this));var i=this.steps.shift();i.call(this,n)}else e.resolve()},when:function(){var n=t.defer();return e.forEach(Array.prototype.slice.call(arguments),function(t){this.push(t)},this.steps),this.next(n),n.promise},unallowed:function(t){this.deferred.reject(t),this.deferred=null,this.state.error(t),r.$$lastRequestedPath=r.path(),r.path("/signin")},error:function(t){var e=t?{message:t.data?t.data.message:"error",status:t.status}:null;this.deferred.reject(e),this.deferred=null,this.state.error(e)},parseHeader:function(){var t=this.response.headers("X-Pagination"),e=t?JSON.parse(t):null;e?(this.page=e.page,this.size=e.size,this.count=e.count,this.pages=e.pages):(this.page=u,this.size=this.size||c,this.count=this.response.data.length,this.pages=Math.ceil(this.count/this.size)),this.pagination=this.getPages()},getUri:function(){return e.isFunction(this.uri)?this.uri():this.uri},getParams:function(){return{params:this.filters.getParams(this)}},get:function(){n.get(this.getUri(),this.getParams()).then(function(t){this.rows.length=0,this.items.length=0,this.response=t,this.parseHeader(),this.when(this.resolve,this.group).then(function(){this.allrows=this.allrows.concat(this.rows),i.$broadcast("onDataSourceUpdate",this),this.state.success(),this.deferred.resolve(this.rows),this.deferred=null}.bind(this))}.bind(this),function(t){this.error(t)}.bind(this))},update:function(t){this.items=[],this.state.busy()&&this.when(this.group).then(function(){this.state.success()}.bind(this))},paging:function(e){var n=this.deferred=e||t.defer();return(this.page<=this.pages||void 0!==e)&&this.state.busy()&&(this.opened=null,this.get()),n.promise},filter:function(){var e=t.defer();return this.allrows=[],this.paging(e),e.promise},add:function(t){this.rows.push(t),this.allrows.push(t),this.update(),this.count++,this.pages=Math.ceil(this.count/this.size)},remove:function(t){var e=this.rows.indexOf(t);e!==-1&&this.rows.splice(e,1),e=this.allrows.indexOf(t),e!==-1&&this.allrows.splice(e,1),this.update(),this.count--,this.pages=Math.ceil(this.count/this.size)},prevPage:function(){var t=this.page-1;t>0&&t<=this.pages&&(this.page=t,this.paging())},nextPage:function(){var t=this.page+1;t>0&&t<=this.pages&&(this.page=t,this.paging())},gotoPage:function(t){t>0&&t<=this.pages&&(this.page=t,this.paging())},firstPage:function(){1!==this.page&&(this.page=1,this.paging())},lastPage:function(){this.page!==this.pages&&(this.page=this.pages,this.paging())},hasMany:function(){return this.pages>this.maxPages},hasMorePagesBehind:function(){var t=Math.max(0,this.page-this.maxPages);return t>0},hasMorePagesNext:function(){var t=Math.max(0,this.page-this.maxPages)+this.maxPages;return t<this.pages},isPage:function(t){return this.page===t},hasPages:function(){return this.pages>0&&this.pages<h},getPages:function(){var t,e=[];if(this.hasPages()){var n=Math.max(0,this.page-this.maxPages),i=Math.min(this.pages,n+this.maxPages);for(t=n;t<i;)e.push({number:t+1}),t++}return e},openClose:function(t){this.opened===t?this.opened=null:this.opened=t},setSort:function(n,i){var r=t.defer();return this.state.isBusy||(this.filters.sort={},this.filters.sort[n]=i,e.isFunction(this.sort)?(this.sort(this),r.resolve(this.rows)):(this.allrows=[],this.paging(r))),r.promise},getSort:function(t){return this.filters.sort?this.filters.sort[t]||0:0},hasSort:function(){if(this.filters.sort){var t=!1;return e.forEach(this.filters.sort,function(e){t=t||e}),t}return!1},setSearch:function(n,i){var r=t.defer();return this.state.isBusy||(this.filters.search={},i&&""!==i&&(this.filters.search[n]=i),e.isFunction(this.search)?(this.search(this),r.resolve(this.rows)):(this.allrows=[],this.paging(r))),r.promise},getSearch:function(t){return this.filters.search?this.filters.search[t]||0:0},hasSearch:function(){if(this.filters.search){var t=!1;return e.forEach(this.filters.search,function(e){t=t||e&&""!==e}),t}return!1},setDateFrom:function(n){var i=t.defer();return this.state.isBusy||(this.filters.dateFrom=n||"",e.isFunction(this.dateFrom)?(this.dateFrom(this),i.resolve(this.rows)):(this.allrows=[],this.paging(i))),i.promise},getDateFrom:function(){return this.filters.dateFrom||null},setDateTo:function(n){var i=t.defer();return this.state.isBusy||(this.filters.dateTo=n||"",e.isFunction(this.dateTo)?(this.dateTo(this),i.resolve(this.rows)):(this.allrows=[],this.paging(i))),i.promise},getDateTo:function(){return this.filters.dateTo||null},setDates:function(e,n){var i=t.defer();return this.state.isBusy||(this.filters.dateFrom=e||"",this.filters.dateTo=n||"",this.allrows=[],this.paging(i)),i.promise}},a}]),n.factory("Column",["$parse","$filter","Utils","colTypes",function(t,n,i,r){function s(n){n?e.extend(this,n):null,e.isFunction(this.value)&&(this.value=this.value.bind(this)),this.name=this.name||this.value,this.raw=this.raw||this.value,this.key=this.key||this.value,this.source=this.source||this.value,this.getters={};var i=["key","value","raw","source","post"];e.forEach(i,function(n){this[n]&&(this.getters[n]=e.isFunction(this[n])?this[n]:t(this[n]))},this),this.setters={},e.forEach(this.getters,function(t,n){e.isFunction(this[n])||(this.setters[n]=t.assign)},this),this.reset()}return s.prototype={getKey:function(t){return this.getters.key(t)},getValue:function(t){return this.getters.value(t)},getRaw:function(t){return this.getters.raw(t)},getSource:function(t){return this.getters.source(t)},reset:function(){this.values=[],this.keys={},this.search=[],this.total=0},hasKey:function(t){var e=!0,n=this.getKey(t);return n&&1!=this.keys[n]&&(this.keys[n]=!0,e=!1),e},initValue:function(t){return this.setters.raw(t,this.getters.value(t)||0),this},addTotal:function(t,e){return this.setters.raw(t,(this.getters.raw(t)||0)+(this.getters.value(e)||0)),this},addCount:function(t,e){if(!this.hasKey(e)&&this.setters.raw){var n=null;n=t!=e?(this.getters.raw(t)||0)+1:1,this.setters.raw(t,n)}return this},addValue:function(t){this.values=this.values||[];var n=this.getKey(t),i=!1;if(e.forEach(this.values,function(t){t.id==n&&(i=!0)}),!i){var r=this.getRaw(t);this.values.push({id:n,name:r||"-"})}},getValueTotal:function(t){var n=0;if(this.compare&&this.type===r.INCREMENT){var i=0,s=0;e.forEach(t,function(t){i+=this.col.getters.raw(t)||0,s+=this.getters.raw(t)||0}.bind(this)),s&&(n=(i-s)/s*100)}else e.forEach(t,function(t){n+=this.getRaw(t)||0}.bind(this));return this.total=n,n},getValueFormatted:function(t){var i=this.getRaw(t);switch(this.type){case r.RESOURCE:case r.DISABLED:i=n("shortName")(i);break;case r.ID:case r.NUMBER:i=n("customNumber")(i,0);break;case r.DOUBLE:i=n("customNumber")(i,2);break;case r.WEEKS:i=n("customNumber")(i,2," W");break;case r.DATE:i=n("date")(i,"yyyy-MM-dd");break;case r.HOURS:i=n("customNumber")(i,0," H");break;case r.COSTS:i=n("customNumber")(i,0," €");break;case r.PERCENT:i=n("customNumber")(i,2," %");break;case r.INCREMENT:i=e.isNumber(i)?(i>0?"+":"")+n("customNumber")(i,2," %"):i||"-"}return i},getFormatted:function(t){return this.dynamic?this.getValueFormatted(t):t.static[this.id].value},getTotal:function(t){var i=this.getValueTotal(t);switch(this.type){case r.NUMBER:i=n("customNumber")(i,0);break;case r.DOUBLE:i=n("customNumber")(i,2);break;case r.WEEKS:i=n("customNumber")(i,2," W");break;case r.HOURS:i=n("customNumber")(i,0," H");break;case r.COSTS:i=n("customNumber")(i,0," €");break;case r.PERCENT:i=n("customNumber")(i,2," %");break;case r.INCREMENT:i=e.isNumber(i)?(i>0?"+":"")+n("customNumber")(i,2," %"):i||"-"}return i},getFormat:function(){var t="";switch(this.type){case r.ID:case r.NUMBER:t="#";break;case r.DOUBLE:t="#";break;case r.DATE:t="yyyy-mm-dd";break;case r.WEEKS:t="#,###0 [$W]";break;case r.HOURS:t="#,###0 [$H]";break;case r.COSTS:t="#,###.00 €";break;case r.PERCENT:t="0.00%";break;case r.INCREMENT:t="[Color 10]+0.00%;[Red]-0.00%;-"}return t},getLink:function(t){return e.isFunction(this.link)?this.link(t):null},getHeaderClass:function(){var t=[];switch(e.forEach(this,function(e,n){e===!0&&t.push(n)}),this.type){case r.NUMBER:case r.DOUBLE:case r.WEEKS:case r.HOURS:case r.COSTS:case r.PERCENT:case r.INCREMENT:t.push("text-xs-right")}var n=this.getColumnClass();return""!=n&&t.push(n),t.join(" ")},getCellClass:function(t){var n=[];switch(e.forEach(this,function(t,e){t===!0&&n.push(e)}),this.type){case r.LINK:n.push("text-underline");break;case r.NUMBER:case r.DOUBLE:case r.WEEKS:case r.HOURS:case r.COSTS:n.push("text-xs-right");break;case r.PERCENT:n.push("text-xs-right");break;case r.INCREMENT:n.push("text-xs-right")}return n.join(" ")},getColumnClass:function(){return this.color?"shade-light-blue-"+this.color:""},getItemClass:function(t){var e=[];e.push(t.static[this.id].baseClass);var n=this.getColumnClass();return""!=n&&e.push(n),e.join(" ")},getTextClass:function(t){var n=[];switch(this.type){case r.INCREMENT:var i=this.getRaw(t);e.isNumber(i)&&i<0?n.push("text-danger"):n.push("text-success")}return n.join(" ")},getTotalClass:function(t){var e=[];switch(this.type){case r.NUMBER:case r.DOUBLE:case r.WEEKS:case r.HOURS:case r.COSTS:case r.PERCENT:case r.INCREMENT:e.push("text-xs-right")}return e.join(" ")},searchToggle:function(t){var e=this.search.indexOf(t.id);e===-1?(t.active=!0,this.search.push(t.id)):(t.active=!1,this.search.splice(e,1))},isActive:function(){return e.isFunction(this.active)&&this.active?this.active():this.active;
},toggle:function(){e.isFunction(this.active)?null:this.active=!this.active},activate:function(){e.isFunction(this.active)?null:this.active=!0},deactivate:function(){e.isFunction(this.active)?null:this.active=!1},makeStatic:function(t){this.post&&this.setters.raw(t,this.getters.post(t)||0);var e=this;t.static[e.id]={baseClass:e.getCellClass(t),textClass:e.getTextClass(t),value:e.getValueFormatted(t),link:e.link?e.link(t):null,pop:e.pop?e.pop(t):null}}},s.types=r,s}]),n.factory("Columns",["$parse","Utils","Column","colTypes",function(t,n,i,r){function s(t){var n=[];return t&&e.forEach(t,function(t,e){t.id=e+1,n.push(new i(t))}),e.extend(n,s.prototype),n}return s.prototype={getCount:function(){var t=0;return e.forEach(this,function(e){t+=e.isActive()?1:0}.bind(this)),t},getFirstCol:function(){var t=null;return e.forEach(this,function(e){null===t&&e.isActive()&&e.groupBy&&"month"!==e.value&&"monthShort"!==e.value&&(t=e)}),t},getChartKey:function(t,n){var i=[];return e.forEach(this,function(e){e.isActive()&&e.groupBy&&"month"!==e.value&&"monthShort"!==e.value&&0===i.length&&i.push(e.getKey(t))}),i.push(n),i.join("-")},getGroupKey:function(t){var n=[];return e.forEach(this,function(e){e.isActive()&&e.groupBy&&n.push(e.getKey(t))}),n.join("-")},getSortKey:function(n){var i=[];return e.forEach(this,function(e){e.isActive()&&e.groupBy&&i.push(e.sort?t(e.sort)(n):e.getValueFormatted(n))}),i.join("")},expand:function(t){var n={dynamic:!0,compare:!0};t?e.extend(n,t):null;var o=[];return o.radios={},e.forEach(this,function(t,e){t.id=o.length+1,o.push(t),t.aggregate&&(n.dynamic&&o.push(new i({id:o.length+1,name:"%",value:function(e){return t.getters.raw(e)/t.total*100},key:t.key,type:r.PERCENT,dynamic:!0,active:function(){return o.showDynamics&&t.active},col:t})),n.compare&&(o.push(new i({id:o.length+1,name:"anno precedente",value:function(t){return this.getters.raw(t)},raw:t.value+"Last",source:t.value,key:t.key,type:t.type,count:t.count,compare:!0,dynamic:!0,active:function(){return o.showComparison&&t.active},col:t})),o.push(new i({id:o.length+1,name:"%",value:function(e){var n=t.getters.raw(e)||0,i=this.getters.raw(e)||0;return i?(n-i)/i*100:null},raw:t.value+"Gain",source:t.value,key:t.key,type:r.INCREMENT,count:t.count,compare:!0,dynamic:!0,active:function(){return o.showComparison&&t.active},col:t})))),t.radio&&t.active&&(o.radios[t.radio]=t.value)}),e.extend(o,s.prototype),o},getGroups:function(){var t=[];return e.forEach(this,function(e,n){e.groupBy&&t.push(e)}),e.extend(t,s.prototype),t},getCounters:function(){var t=[];return e.forEach(this,function(e,n){e.count&&t.push(e)}),e.extend(t,s.prototype),t},getAggregates:function(){var t=[];return e.forEach(this,function(e,n){e.aggregate&&!e.count&&t.push(e)}),e.extend(t,s.prototype),t},getPercentages:function(){var t=[];return e.forEach(this,function(e,n){e.type===r.PERCENT&&t.push(e)}),e.extend(t,s.prototype),t},getDynamics:function(){var t=[];return e.forEach(this,function(e,n){e.dynamic&&t.push(e)}),e.extend(t,s.prototype),t},getCompares:function(){var t=[];return e.forEach(this,function(e,n){e.compare&&t.push(e)}),e.extend(t,s.prototype),t},reset:function(){return this.groups={},e.forEach(this,function(t){t.reset()}),this},makeStatic:function(t){e.forEach(this,function(t,e){t.values=[],t.static={active:t.isActive(),headerClass:t.getHeaderClass()}}),e.forEach(this,function(n,i){(n.static.active||n.dynamic)&&(e.forEach(t,function(t){n.makeStatic(t),n.groupBy?n.addValue(t):null}),n.groupBy&&(n.values=n.values.sort(function(t,e){var n,i;return n=t.name?String(t.name).toLowerCase():"",i=e.name?String(e.name).toLowerCase():"",n<i?-1:n>i?1:0})))})},activeInRange:function(t){for(var e=!1,n=0;!e&&n<this.length;){var i=this[n];i.static.active&&(e=t.indexOf(i.value)!==-1),n++}return e},unique:function(t,e){var n=this.getGroupKey(t),i=this.groups[n];return i||(i=this.groups[n]=t,i.static=[],e.push(i)),i},iterate:function(t,n){t=e.copy(t);var i=this.unique(t,n);this.addTotals(i,t)},compare:function(t,n){t=e.copy(t),e.forEach(this,function(e){if(e.compare){var n=e.getters.source(t);e.setters.raw(t,n)}}),e.forEach(this,function(e){e.compare&&e.setters.source(t,0)});var i=this.unique(t,n);this.addTotals(i,t,!0)},addTotals:function(t,n,i){return e.forEach(this,function(e){e.isActive()&&(i?e.compare:!e.compare)&&(e.count?e.addCount(t,n):(i||e.aggregate)&&(e.hasKey(n)||(t===n?e.initValue(t):e.addTotal(t,n))))}),this},toggleColumns:function(t){t.radio?(e.forEach(this,function(e){t.radio===e.radio&&t!==e&&e.deactivate()}),t.activate(),this.radios[t.radio]=t.value):t.toggle()},searchDisabled:function(t,e,n){for(var i=t.id,r=!1,s=0;s<n.length;)r=r||e.getKey(n[s])===i,r?s=n.length:s++;return!r},setMode:function(t){switch(this[t]=!this[t],t){case"showDynamics":this.showComparison=!1;break;case"showComparison":this.showDynamics=!1}return this[t]}},s.types=r,s.fromDatas=function(t){return s.parseCols(t)},s.parseCols=function(t){function n(t,s){if(e.isArray(t))e.forEach(t,function(t,e){n(t,(s||"")+"["+e+"]")});else if(e.isObject(t))e.forEach(t,function(t,e){n(t,(s?s+".":"")+e)});else{var o={value:s,type:r.TEXT,active:i.length<3};e.isNumber(t)?(o.type=r.NUMBER,o.aggregate=!0,o.color=1):e.isDate(t)?o.type=r.DATE:(o.groupBy=!0,o.hasSearch=!0),i.push(o)}}var i=null;return t&&t.length&&(i=[],n(t[0])),i},s}]),n.factory("Table",["$parse","Columns","Column","colTypes",function(t,n,i,r){function s(t){this.cols=new n(t).expand({dynamic:!0,compare:!1}),this.cols.showReport=!0,this.defaults=t.map(function(t){return{id:t.id,active:t.active}}),this.colGroups=[{name:"GroupBy",cols:this.cols.getGroups()}],this.valGroups=[{name:"Aggregate",cols:this.cols.getAggregates()}],this.excludes=[],this.includes=[]}return s.prototype={groupBy:function(t,n){var i=this.rows,r=this.cols,s=this.excludes,o=this.includes;r.reset();var a=null;e.forEach(t,function(t){var n=!0;e.forEach(s,function(e){e.active&&(n=n&&e.filter(t))}),e.forEach(o,function(e){e.active&&(n=n&&e.filter(t))}),n&&r.iterate(t,i)}),n&&(a=[],e.forEach(n,function(t){var n=!0;e.forEach(s,function(e){e.active&&(n=n&&e.filter(t))}),e.forEach(o,function(e){e.active&&(n=n&&e.filter(t))}),n&&(a.push(t),r.compare(t,i))})),r.makeStatic(i)},update:function(){this.rows=[],this.groupBy(this.datas)},setDatas:function(t){this.datas=t,this.update()},resetFilters:function(){var t=this;e.forEach(t.cols,function(n,i){e.forEach(t.defaults,function(t){n.id===t.id&&(e.isFunction(n.active)?null:n.active=t.active)}),n.search=null}),t.cols=t.cols.sort(function(t,e){return t.id-e.id}),t.update()},exclude:function(t){t.active=!t.active,this.update()},include:function(t){t.active=!t.active,this.update()},toggleCol:function(t){this.cols.toggleColumns(t),this.update()},doFilter:function(t){return function(n){var i=!0;return e.forEach(t,function(t){t.isActive()&&t.search&&0!==t.search.id&&(i=i&&t.getKey(n)===t.search.id)}.bind(this)),i}},doFilterMultiple:function(t){return function(n){var i=!0;return e.forEach(t,function(t){t.isActive()&&t.search.length&&(i=i&&t.search.indexOf(t.getKey(n))!=-1)}.bind(this)),i}},doFilterColumns:function(t){return function(t){return t.isActive()}},doOrder:function(t){return function(e){return t.getSortKey(e)}},getRowClass:function(t){return""},onOpen:function(t){console.log("onOpen",t)}},s.fromDatas=function(t){var e=n.fromDatas(t);return new s(e)},s}]),n.factory("ChartData",["$filter",function(n){function i(t){var i={type:"chart-line",labels:[],series:[],data:[],options:{bezierCurve:!1,elements:{line:{tension:0}},scaleLabel:function(t){return n("currency")(t.value)},tooltipTemplate:function(t){return n("currency")(t.value)},scales:{yAxes:[{gridLines:{display:!1},ticks:{min:0,callback:function(t,e,i){return n("customNumber")(t,2," W")}}}],callbacks:{label:function(t){return console.log("b"),n("customNumber")(t.value,2," W")}}},tooltips:{callbacks:{title:function(t,e){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label,r=e.datasets[t.datasetIndex].data[t.index];return i+": "+n("customNumber")(r,2," W")}}}},onClick:function(t,e){console.log("chart",t,e)},datasetOverride:[]};e.extend(this,i),t?e.extend(this,t):null}return i.prototype={getObjectParams:function(t){var e=[];if(t)for(var n in t)e.push({name:n,value:t[n]});return e},getParams:function(e){var n,i={};for(var r in this)switch(r){case"dateFrom":case"dateTo":case"status":n=this[r],void 0!==n&&(i[r]=n);break;case"search":case"sort":var s=JSON.stringify(this.getObjectParams(this[r]),null,"");i[r]=t.btoa(s)}return e.unpaged||(i.page=e.page,i.size=e.size),i},getMonths:function(){function t(t,e){var n;return n=12*(e.getFullYear()-t.getFullYear()),n-=t.getMonth()+1,n+=e.getMonth()+1,n++,n<=0?0:n}var e=[];if(this.dateFrom&&this.dateTo){var i=[this.dateFrom,this.dateTo];i=i.sort(function(t,e){return t.getTime()-e.getTime()});for(var r=Math.max(1,t(i[0],i[1])),s=0;s<r;){var o=new Date(i[0].getFullYear(),i[0].getMonth()+s,1);e.push({id:o.getTime(),name:n("date")(o,"(yyyy MM) MMMM"),nameShort:n("date")(o,"MMM yy")}),s++}}return e}},i}]),n.service("Droppables",["ElementRect",function(t){this.natives=[],this.callbacks=[],this.rects=[],this.add=function(e,n){this.natives.push(e),this.callbacks.push(n||function(){}),this.rects.push(t.fromNative(e))},this.remove=function(t){var e=this.natives.indexOf(t);e!==-1&&(this.natives.splice(e,1),this.callbacks.splice(e,1),this.rects.splice(e,1))},this.getIntersections=function(t){var n,i=[];return e.forEach(this.rects,function(r,s){r.set(r.native),n=e.element(r.native),n.removeClass("dropping"),r.intersect(t)?(r.distance=r.center.distance(t.center),r.data=this.callbacks[s](),i.push(r),n.addClass("over")):n.removeClass("over")}.bind(this)),i.sort(function(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0}),i}}])}(window,window.angular);
//# sourceMappingURL=report.min.js.map
